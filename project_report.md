# MetaLearn AI - Project Report & Handoff

**Project:** MetaLearn AI
**Description:** An AI-powered meta-learning mentor that optimizes *how* users learn using data analytics, voice coaching, and scientific A/B testing ("Experiments").
**Tech Stack:** Next.js (React), Tailwind CSS, Supabase (PostgreSQL), Gemini API (AI Insights), Framer Motion (Animations), Recharts (Analytics).

---

## ðŸš€ Key Achievements
1.  **Core Dashboard**: Real-time stats (Total Hours, Confidence, Sessions).
2.  **AI Voice Coach**: "Session Insights" powered by **Gemini Pro**, providing text & voice feedback patterns (e.g., "Deep Work State Detected") based on session logs.
3.  **The Lab (Gamification)**: A "Soft Gamification" feature allowing users to run A/B tests on their study methods (e.g., *Pomodoro vs. Deep Work*) with scientific tracking.
4.  **Mobile PWA**: Fully functional Progressive Web App. Installable on iOS/Android. Optimized mobile UI with FAB (Floating Action Button).
5.  **Data Integrity**: Fixed real-time aggregation of session statistics directly from Supabase.

---

## ðŸ“‚ File Structure & Architecture

### **1. Frontend Pages (`/pages`)**
*   **`dashboard.js`**: Main hub. Displays "Learning Vector" (speed/retention stats), recent activity, and quick actions. Fetches real data from `/api/dashboard-data`. 
    *   *Role*: Commander center for the user.
*   **`log-session.js`**: Dedicated page for entering study session details (Topic, Time, Confidence, Errors).
    *   *Role*: Data entry point.
*   **`experiments.js`** *(New)*: "The Lab" interface. Visualizes A/B test results and allows starting new protocols.
    *   *Role*: Gamification & Meta-learning engine.
*   **`insights.js`**: Dedicated AI feedback page. Shows detailed AI analysis of past sessions.
    *   *Role*: Qualitative feedback loop.
*   **`progress.js`**: Detailed analytics visualization using Recharts (Line Charts over 7D/30D/All Time).
    *   *Role*: Quantitative feedback loop.
*   **`_app.js` / `_document.js`**: Global layout, PWA meta tags, and font definitions.

### **2. API Backend (`/pages/api`)**
*   **`dashboard-data.js`**: Aggregates raw session rows from Supabase into high-level stats (Total Time, Avg Confidence) and graph data.
    *   *Key Logic*: Calculates weighted averages server-side for accuracy.
*   **`experiments.js`** *(New)*: CRUD endpoints for "The Lab". Handles creating experiments and logging A/B data points.
*   **`log-session.js`**: Writes new session rows to `sessions` table. Triggers AI Insight generation.
*   **`generate-coaching.js`**: Connects to **Gemini API** to analyze session data and generate textual advice + patterns.

### **3. UI Components (`/components`)**
*   **`NavigationBar.jsx`**: Responsive sidebar/bottom-nav. Handles routing.
    *   *Update*: Added "Experiments" link and fixed icon imports.
*   **`VoiceCoachingPlayer.jsx`**: Visualizes AI feedback.
    *   *Optimization*: Switched from heavy JS visualizer to CSS-based animation for 60fps mobile performance.
*   **`SessionLogger.jsx`**: Complex form for logging data.
*   **`LearningVectorDashboard.jsx`**: The 4-card stat grid (Speed, Retention, etc.) viewed on Dashboard.
*   **`ProgressTimeline.jsx`**: Recharts wrapper for the confidence graph.

### **4. Libraries (`/lib`)**
*   **`supabaseClient.js`**: Singleton Supabase client initialization. Handles env var connection.
*   **`geminiAPI.js`**: Interface to Google's Gemini Pro for generating study insights.
*   **`featureEngineering.js`**: (Experimental) Logic to calculate complex metrics like "Forgetting Curve".

### **5. Database (`schema.sql`)**
*   **`sessions`**: Stores raw study logs.
*   **`user_profiles`**: Stores aggregated user stats.
*   **`experiments`**: Stores A/B testing protocols and JSON score arrays.
*   **`coaching_history`**: Stores generated AI insights.

### **6. Configuration**
*   **`pwa-manifest` (public/manifest.json)**: Configures the app name, icons, and theme color for mobile installation.
*   **`next.config.mjs`**: Enabled `next-pwa` for offline capabilities.
*   **`tailwind.config`**: Custom aesthetics (Glassmorphism, Neon Accents).

---

## ðŸ”® Next Steps for Lead
1.  **Deployment**: Push to Vercel (Production) now that PWA and Database are stable.
2.  **Auth**: Currently using a demo user ID (`user_123_demo`). Next phase needs real Supabase Auth (Email/Login).
3.  **AI Voice**: Currently using Web Speech API (Free). Can upgrade to ElevenLabs for premium AI voices.

---
*Report generated by Antigravity Agent.*
